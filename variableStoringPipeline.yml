pr:
  branches:
    include:
    - b4

variables:
- name: one
  value: initialValue 

pool:
    vmImage: ubuntu-20.04

steps:
  - task: Bash@3
    displayName: Bash Task
    inputs:
      targetType: 'inline'
      script: |
        echo 'Hello world'
        echo $SYSTEM_PULLREQUEST_PULLREQUESTNUMBER
        echo $SYSTEM_PULLREQUEST_PULLREQUESTNUMBER
        echo $SYSTEM_PULLREQUEST_PULLREQUESTID
        echo $SYSTEM_PULL_REQUEST_SOURCEBRANCH
        echo $SYSTEM_PULLREQUEST_ISFORK
        echo $SYSTEM_PULLREQUEST_SOURCEREPOSITORYURI
        echo 'Hello world end 2'
        variables['System.PullRequest.SourceRepositoryURI']
        echo $BUILD_SOURCEVERSION
        curl https://api.github.com/search/issues?q=sha:$BUILD_SOURCEVERSION | grep number
      noProfile: false
      noRc: false
#
#  - task: InvokeRESTAPI@1
#    inputs:
#      connectionType: 'connectedServiceName'
#      serviceConnection: 'GitHubGenericConnection'
#      method: 'POST'
#      urlSuffix: '/repos/$BUILD_REPOSITORY_ID/issues/$SYSTEM_PULLREQUEST_PULLREQUESTNUMBER/'
#      waitForCompletion: 'false'




#        echo "PR number = ${{ github.event.pull_request.number }}"
#        echo "PR number = ${{ env.PR_NUMBER }}"